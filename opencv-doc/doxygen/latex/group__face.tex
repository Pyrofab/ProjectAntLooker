\hypertarget{group__face}{}\section{Face Recognition}
\label{group__face}\index{Face Recognition@{Face Recognition}}


Abstract base class for all strategies of prediction result handling.  


\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class {\bfseries org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+Predict\+Collector}
\item 
class {\bfseries org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+Standard\+Collector}
\begin{DoxyCompactList}\small\item\em Default predict collector. \end{DoxyCompactList}\item 
class {\bfseries org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+Face\+Recognizer}
\item 
class {\bfseries org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+Basic\+Face\+Recognizer}
\item 
class {\bfseries org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+L\+B\+P\+H\+Face\+Recognizer}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static native Basic\+Face\+Recognizer \hyperlink{group__face_ga6f3a56396530d46af3fba9ad04fc80cf}{org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+create\+Eigen\+Face\+Recognizer} (int num\+\_\+components, double threshold)
\item 
\mbox{\Hypertarget{group__face_gac70e2c94b7d6f05d26f762bed96b2da7}\label{group__face_gac70e2c94b7d6f05d26f762bed96b2da7}} 
static native Basic\+Face\+Recognizer {\bfseries org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+create\+Eigen\+Face\+Recognizer} ()
\item 
static native Basic\+Face\+Recognizer \hyperlink{group__face_ga80a98f353dd2ef661444e0d79bbe9daf}{org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+create\+Fisher\+Face\+Recognizer} (int num\+\_\+components, double threshold)
\item 
\mbox{\Hypertarget{group__face_ga241cb766e32721cf0ba5c6fde7006808}\label{group__face_ga241cb766e32721cf0ba5c6fde7006808}} 
static native Basic\+Face\+Recognizer {\bfseries org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+create\+Fisher\+Face\+Recognizer} ()
\item 
static native L\+B\+P\+H\+Face\+Recognizer \hyperlink{group__face_ga970c161034e055fb56615aadba87ac4e}{org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+create\+L\+B\+P\+H\+Face\+Recognizer} (int radius, int neighbors, int grid\+\_\+x, int grid\+\_\+y, double threshold)
\item 
\mbox{\Hypertarget{group__face_ga6d5f6361f7aeeb413b5e582ac60ae6e5}\label{group__face_ga6d5f6361f7aeeb413b5e582ac60ae6e5}} 
static native L\+B\+P\+H\+Face\+Recognizer {\bfseries org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+create\+L\+B\+P\+H\+Face\+Recognizer} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Abstract base class for all strategies of prediction result handling. 

Abstract base class for all face recognition models.


\begin{DoxyItemize}
\item face\+\_\+changelog
\item tutorial\+\_\+face\+\_\+main 
\end{DoxyItemize}

/$\ast$$\ast$

/$\ast$$\ast$

All face recognition models in Open\+CV are derived from the abstract base class Face\+Recognizer, which provides a unified access to all face recongition algorithms in Open\+CV. 

\paragraph*{Description}

I\textquotesingle{}ll go a bit more into detail explaining Face\+Recognizer, because it doesn\textquotesingle{}t look like a powerful interface at first sight. But\+: Every Face\+Recognizer is an Algorithm, so you can easily get/set all model internals (if allowed by the implementation). Algorithm is a relatively new Open\+CV concept, which is available since the 2.\+4 release. I suggest you take a look at its description. 

Algorithm provides the following features for all derived classes\+: 


\begin{DoxyItemize}
\item So called “virtual constructor”. That is, each Algorithm derivative is registered at program start and you can get the list of registered algorithms and create instance of a particular algorithm by its name (see Algorithm\+::create). If you plan to add your own algorithms, it is good practice to add a unique prefix to your algorithms to distinguish them from other algorithms.
\item Setting/\+Retrieving algorithm parameters by name. If you used video capturing functionality from Open\+CV highgui module, you are probably familar with cv\+::cv\+Set\+Capture\+Property, ocvcv\+Get\+Capture\+Property, Video\+Capture\+::set and Video\+Capture\+::get. Algorithm provides similar method where instead of integer id\textquotesingle{}s you specify the parameter names as text Strings. See Algorithm\+::set and Algorithm\+::get for details.
\item Reading and writing parameters from/to X\+ML or Y\+A\+ML files. Every Algorithm derivative can store all its parameters and then read them back. There is no need to re-\/implement it each time. 
\end{DoxyItemize}

Moreover every Face\+Recognizer supports the\+: 


\begin{DoxyItemize}
\item {\bfseries Training} of a Face\+Recognizer with Face\+Recognizer\+::train on a given set of images (your face database!).
\item {\bfseries Prediction} of a given sample image, that means a face. The image is given as a Mat.
\item {\bfseries Loading/\+Saving} the model state from/to a given X\+ML or Y\+A\+ML.
\item {\bfseries Setting/\+Getting labels info}, that is stored as a string. String labels info is useful for keeping names of the recognized people. 
\end{DoxyItemize}

\begin{DoxyNote}{Note}
When using the Face\+Recognizer interface in combination with Python, please stick to Python 2. Some underlying scripts like create\+\_\+csv will not work in other versions, like Python 3. Setting the Thresholds +++++++++++++++++++++++ 
\end{DoxyNote}
Sometimes you run into the situation, when you want to apply a threshold on the prediction. A common scenario in face recognition is to tell, whether a face belongs to the training dataset or if it is unknown. You might wonder, why there\textquotesingle{}s no public A\+PI in Face\+Recognizer to set the threshold for the prediction, but rest assured\+: It\textquotesingle{}s supported. It just means there\textquotesingle{}s no generic way in an abstract class to provide an interface for setting/getting the thresholds of {\itshape every possible} Face\+Recognizer algorithm. The appropriate place to set the thresholds is in the constructor of the specific Face\+Recognizer and since every Face\+Recognizer is a Algorithm (see above), you can get/set the thresholds at runtime! 

Here is an example of setting a threshold for the Eigenfaces method, when creating the model\+: 


\begin{DoxyPre}
\begin{DoxyCode}
\textcolor{comment}{// Let's say we want to keep 10 Eigenfaces and have a threshold value of 10.0}
\textcolor{keywordtype}{int} num\_components = 10;
\textcolor{keywordtype}{double} threshold = 10.0;
\textcolor{comment}{// Then if you want to have a cv::FaceRecognizer with a confidence threshold,}
\textcolor{comment}{// create the concrete implementation with the appropiate parameters:}
Ptr<FaceRecognizer> model = \hyperlink{group__face_ga6f3a56396530d46af3fba9ad04fc80cf}{createEigenFaceRecognizer}(num\_components, threshold);
\end{DoxyCode}
 \end{DoxyPre}
 

Sometimes it\textquotesingle{}s impossible to train the model, just to experiment with threshold values. Thanks to Algorithm it\textquotesingle{}s possible to set internal model thresholds during runtime. Let\textquotesingle{}s see how we would set/get the prediction for the Eigenface model, we\textquotesingle{}ve created above\+: 


\begin{DoxyPre}
\begin{DoxyCode}
\textcolor{comment}{// The following line reads the threshold from the Eigenfaces model:}
\textcolor{keywordtype}{double} current\_threshold = model->getDouble(\textcolor{stringliteral}{"threshold"});
\textcolor{comment}{// And this line sets the threshold to 0.0:}
model->set(\textcolor{stringliteral}{"threshold"}, 0.0);
\end{DoxyCode}
 \end{DoxyPre}
 

If you\textquotesingle{}ve set the threshold to 0.\+0 as we did above, then\+: 


\begin{DoxyPre}
\begin{DoxyCode}
\textcolor{comment}{//}
Mat img = imread(\textcolor{stringliteral}{"person1/3.jpg"}, CV\_LOAD\_IMAGE\_GRAYSCALE);
\textcolor{comment}{// Get a prediction from the model. Note: We've set a threshold of 0.0 above,}
\textcolor{comment}{// since the distance is almost always larger than 0.0, you'll get -1 as}
\textcolor{comment}{// label, which indicates, this face is unknown}
\textcolor{keywordtype}{int} predicted\_label = model->predict(img);
\textcolor{comment}{// ...}
\end{DoxyCode}
 \end{DoxyPre}
 

is going to yield -\/1 as predicted label, which states this face is unknown. 

\paragraph*{Getting the name of a Face\+Recognizer}

Since every Face\+Recognizer is a Algorithm, you can use Algorithm\+::name to get the name of a Face\+Recognizer\+: 


\begin{DoxyPre}
\begin{DoxyCode}
\textcolor{comment}{// Create a FaceRecognizer:}
Ptr<FaceRecognizer> model = \hyperlink{group__face_ga6f3a56396530d46af3fba9ad04fc80cf}{createEigenFaceRecognizer}();
\textcolor{comment}{// And here's how to get its name:}
String name = model->name();
\end{DoxyCode}
 \end{DoxyPre}
 

\subsection{Function Documentation}
\mbox{\Hypertarget{group__face_ga6f3a56396530d46af3fba9ad04fc80cf}\label{group__face_ga6f3a56396530d46af3fba9ad04fc80cf}} 
\index{Face Recognition@{Face Recognition}!create\+Eigen\+Face\+Recognizer@{create\+Eigen\+Face\+Recognizer}}
\index{create\+Eigen\+Face\+Recognizer@{create\+Eigen\+Face\+Recognizer}!Face Recognition@{Face Recognition}}
\subsubsection{\texorpdfstring{create\+Eigen\+Face\+Recognizer()}{createEigenFaceRecognizer()}}
{\footnotesize\ttfamily static native Basic\+Face\+Recognizer org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+create\+Eigen\+Face\+Recognizer (\begin{DoxyParamCaption}\item[{int}]{num\+\_\+components,  }\item[{double}]{threshold }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyParams}{Parameters}
{\em num\+\_\+components} & The number of components (read\+: Eigenfaces) kept for this Principal Component Analysis. As a hint\+: There\textquotesingle{}s no rule how many components (read\+: Eigenfaces) should be kept for good reconstruction capabilities. It is based on your input data, so experiment with the number. Keeping 80 components should almost always be sufficient. \\
\hline
{\em threshold} & The threshold applied in the prediction. \\
\hline
\end{DoxyParams}
\paragraph*{Notes\+:}


\begin{DoxyItemize}
\item Training and prediction must be done on grayscale images, use cvt\+Color to convert between the color spaces.
\item {\bfseries T\+HE E\+I\+G\+E\+N\+F\+A\+C\+ES M\+E\+T\+H\+OD M\+A\+K\+ES T\+HE A\+S\+S\+U\+M\+P\+T\+I\+ON, T\+H\+AT T\+HE T\+R\+A\+I\+N\+I\+NG A\+ND T\+E\+ST I\+M\+A\+G\+ES A\+RE OF E\+Q\+U\+AL S\+I\+ZE.} (caps-\/lock, because I got so many mails asking for this). You have to make sure your input data has the correct shape, else a meaningful exception is thrown. Use resize to resize the images.
\item This model does not support updating. 
\end{DoxyItemize}

\paragraph*{Model internal data\+:}


\begin{DoxyItemize}
\item num\+\_\+components see create\+Eigen\+Face\+Recognizer.
\item threshold see create\+Eigen\+Face\+Recognizer.
\item eigenvalues The eigenvalues for this Principal Component Analysis (ordered descending).
\item eigenvectors The eigenvectors for this Principal Component Analysis (ordered by their eigenvalue).
\item mean The sample mean calculated from the training data.
\item projections The projections of the training data.
\item labels The threshold applied in the prediction. If the distance to the nearest neighbor is larger than the threshold, this method returns -\/1. 
\end{DoxyItemize}\mbox{\Hypertarget{group__face_ga80a98f353dd2ef661444e0d79bbe9daf}\label{group__face_ga80a98f353dd2ef661444e0d79bbe9daf}} 
\index{Face Recognition@{Face Recognition}!create\+Fisher\+Face\+Recognizer@{create\+Fisher\+Face\+Recognizer}}
\index{create\+Fisher\+Face\+Recognizer@{create\+Fisher\+Face\+Recognizer}!Face Recognition@{Face Recognition}}
\subsubsection{\texorpdfstring{create\+Fisher\+Face\+Recognizer()}{createFisherFaceRecognizer()}}
{\footnotesize\ttfamily static native Basic\+Face\+Recognizer org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+create\+Fisher\+Face\+Recognizer (\begin{DoxyParamCaption}\item[{int}]{num\+\_\+components,  }\item[{double}]{threshold }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyParams}{Parameters}
{\em num\+\_\+components} & The number of components (read\+: Fisherfaces) kept for this Linear Discriminant Analysis with the Fisherfaces criterion. It\textquotesingle{}s useful to keep all components, that means the number of your classes c (read\+: subjects, persons you want to recognize). If you leave this at the default (0) or set it to a value less-\/equal 0 or greater (c-\/1), it will be set to the correct number (c-\/1) automatically. \\
\hline
{\em threshold} & The threshold applied in the prediction. If the distance to the nearest neighbor is larger than the threshold, this method returns -\/1. \\
\hline
\end{DoxyParams}
\paragraph*{Notes\+:}


\begin{DoxyItemize}
\item Training and prediction must be done on grayscale images, use cvt\+Color to convert between the color spaces.
\item {\bfseries T\+HE F\+I\+S\+H\+E\+R\+F\+A\+C\+ES M\+E\+T\+H\+OD M\+A\+K\+ES T\+HE A\+S\+S\+U\+M\+P\+T\+I\+ON, T\+H\+AT T\+HE T\+R\+A\+I\+N\+I\+NG A\+ND T\+E\+ST I\+M\+A\+G\+ES A\+RE OF E\+Q\+U\+AL S\+I\+ZE.} (caps-\/lock, because I got so many mails asking for this). You have to make sure your input data has the correct shape, else a meaningful exception is thrown. Use resize to resize the images.
\item This model does not support updating. 
\end{DoxyItemize}

\paragraph*{Model internal data\+:}


\begin{DoxyItemize}
\item num\+\_\+components see create\+Fisher\+Face\+Recognizer.
\item threshold see create\+Fisher\+Face\+Recognizer.
\item eigenvalues The eigenvalues for this Linear Discriminant Analysis (ordered descending).
\item eigenvectors The eigenvectors for this Linear Discriminant Analysis (ordered by their eigenvalue).
\item mean The sample mean calculated from the training data.
\item projections The projections of the training data.
\item labels The labels corresponding to the projections. 
\end{DoxyItemize}\mbox{\Hypertarget{group__face_ga970c161034e055fb56615aadba87ac4e}\label{group__face_ga970c161034e055fb56615aadba87ac4e}} 
\index{Face Recognition@{Face Recognition}!create\+L\+B\+P\+H\+Face\+Recognizer@{create\+L\+B\+P\+H\+Face\+Recognizer}}
\index{create\+L\+B\+P\+H\+Face\+Recognizer@{create\+L\+B\+P\+H\+Face\+Recognizer}!Face Recognition@{Face Recognition}}
\subsubsection{\texorpdfstring{create\+L\+B\+P\+H\+Face\+Recognizer()}{createLBPHFaceRecognizer()}}
{\footnotesize\ttfamily static native L\+B\+P\+H\+Face\+Recognizer org.\+bytedeco.\+javacpp.\+opencv\+\_\+face.\+create\+L\+B\+P\+H\+Face\+Recognizer (\begin{DoxyParamCaption}\item[{int}]{radius,  }\item[{int}]{neighbors,  }\item[{int}]{grid\+\_\+x,  }\item[{int}]{grid\+\_\+y,  }\item[{double}]{threshold }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyParams}{Parameters}
{\em radius} & The radius used for building the Circular Local Binary Pattern. The greater the radius, the \\
\hline
{\em neighbors} & The number of sample points to build a Circular Local Binary Pattern from. An appropriate value is to use
\begin{DoxyCode}
8 
\end{DoxyCode}
 sample points. Keep in mind\+: the more sample points you include, the higher the computational cost. \\
\hline
{\em grid\+\_\+x} & The number of cells in the horizontal direction, 8 is a common value used in publications. The more cells, the finer the grid, the higher the dimensionality of the resulting feature vector. \\
\hline
{\em grid\+\_\+y} & The number of cells in the vertical direction, 8 is a common value used in publications. The more cells, the finer the grid, the higher the dimensionality of the resulting feature vector. \\
\hline
{\em threshold} & The threshold applied in the prediction. If the distance to the nearest neighbor is larger than the threshold, this method returns -\/1. \\
\hline
\end{DoxyParams}
\paragraph*{Notes\+:}


\begin{DoxyItemize}
\item The Circular Local Binary Patterns (used in training and prediction) expect the data given as grayscale images, use cvt\+Color to convert between the color spaces.
\item This model supports updating. 
\end{DoxyItemize}

\paragraph*{Model internal data\+:}


\begin{DoxyItemize}
\item radius see create\+L\+B\+P\+H\+Face\+Recognizer.
\item neighbors see create\+L\+B\+P\+H\+Face\+Recognizer.
\item grid\+\_\+x see create\+L\+B\+P\+H\+Face\+Recognizer.
\item grid\+\_\+y see create\+L\+B\+P\+H\+Face\+Recognizer.
\item threshold see create\+L\+B\+P\+H\+Face\+Recognizer.
\item histograms Local Binary Patterns Histograms calculated from the given training data (empty if none was given).
\item labels Labels corresponding to the calculated Local Binary Patterns Histograms. 
\end{DoxyItemize}